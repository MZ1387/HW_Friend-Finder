<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kardashian Bestie</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Great+Vibes">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Oswald">
    <!-- <link rel="stylesheet" href="assets/css/styles.css"> -->

</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h1 style="font-family:'Great Vibes', cursive;">Kardashian Bestie</h1>
                <hr>
                <h2 style="font-family:Oswald, sans-serif;">About You</h2>
                <form>
                    <div class="form-group">
                        <label class="control-label">Name (required)</label>
                        <input class="form-control" type="text" id="name" required>
                    </div>
                    <div class="form-group">
                        <label class="control-label">Photo Link (required)</label>
                        <input class="form-control" type="text" id="photo" required>
                    </div>
                </form>
                <hr>
                <h2 style="font-family:Oswald, sans-serif;">Question 1:</h2>
                <h3 style="font-family:Oswald, sans-serif;">You're happy about other people's success.</h3>
                <select class="input-lg" id="q1">
                    <optgroup label="Select Option">
                        <option value="1">1 (Strongly Agree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Disagree)</option>
                    </optgroup>
                </select>
                <h2 style="font-family:Oswald, sans-serif;">Question 2:</h2>
                <h3 style="font-family:Oswald, sans-serif;">You react well to failure.</h3>
                <select class="input-lg" id="q2">
                    <optgroup label="Select Option">
                        <option value="1">1 (Strongly Agree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Disagree)</option>
                    </optgroup>
                </select>
                <h2 style="font-family:Oswald, sans-serif;">Question 3:</h2>
                <h3 style="font-family:Oswald, sans-serif;">You deal well with a serious problem.</h3>
                <select class="input-lg" id="q3">
                    <optgroup label="Select Option">
                        <option value="1">1 (Strongly Agree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Disagree)</option>
                    </optgroup>
                </select>
                <h2 style="font-family:Oswald, sans-serif;">Question 4:</h2>
                <h3 style="font-family:Oswald, sans-serif;">You feel positive about love.</h3>
                <select class="input-lg" id="q4">
                    <optgroup label="Select Option">
                        <option value="1">1 (Strongly Agree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Disagree)</option>
                    </optgroup>
                </select>
                <h2 style="font-family:Oswald, sans-serif;">Question 5:</h2>
                <h3 style="font-family:Oswald, sans-serif;">You have a sense of humor.</h3>
                <select class="input-lg" id="q5">
                    <optgroup label="Select Option">
                        <option value="1">1 (Strongly Agree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Disagree)</option>
                    </optgroup>
                </select>
                <h2 style="font-family:Oswald, sans-serif;">Question 6:</h2>
                <h3 style="font-family:Oswald, sans-serif;">People speak negatively about you.</h3>
                <select class="input-lg" id="q6">
                    <optgroup label="Select Option">
                        <option value="1">1 (Strongly Agree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Disagree)</option>
                    </optgroup>
                </select>
                <h2 style="font-family:Oswald, sans-serif;">Question 7:</h2>
                <h3 style="font-family:Oswald, sans-serif;">You like to argue.</h3>
                <select class="input-lg" id="q7">
                    <optgroup label="Select Option">
                        <option value="1">1 (Strongly Agree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Disagree)</option>
                    </optgroup>
                </select>
                <h2 style="font-family:Oswald, sans-serif;">Question 8:</h2>
                <h3 style="font-family:Oswald, sans-serif;">You enjoy attention.</h3>
                <select class="input-lg" id="q8">
                    <optgroup label="Select Option">
                        <option value="1">1 (Strongly Agree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Disagree)</option>
                    </optgroup>
                </select>
                <h2 style="font-family:Oswald, sans-serif;">Question 9:</h2>
                <h3 style="font-family:Oswald, sans-serif;">You'd blow your first million.</h3>
                <select class="input-lg" id="q9">
                    <optgroup label="Select Option">
                        <option value="1">1 (Strongly Agree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Disagree)</option>
                    </optgroup>
                </select>
                <h2 style="font-family:Oswald, sans-serif;">Question 10:</h2>
                <h3 style="font-family:Oswald, sans-serif;">You agree with Scott.</h3>
                <select class="input-lg" id="q10">
                    <optgroup label="Select Option">
                        <option value="1">1 (Strongly Agree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Disagree)</option>
                    </optgroup>
                </select>
                <br>
                <br>
                <button class="btn btn-danger btn-block btn-lg home-link" type="submit" id="submitSurvey">Submit</button>
                <hr>
                <footer>
                    <p><a href="/api/friends" target="_blank">API Kardashian List</a> | <a href="/api/new-friends" target="_blank">API New Friends List</a> | <a href="https://github.com/MZ1387/HW_Friend-Finder" target="_blank">GitHub Repo</a></p>
                </footer>
            </div>
        </div>
    </div>
    <div class="modal fade" role="dialog" tabindex="-1" id="resultsModal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span>
                    </button>
                    <h4 class="text-center modal-title" id="modalHeader"></h4>
                </div>
                <div class="modal-body"><img class="img-rounded img-responsive" id="modalImg" src="" width="100%">
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default" type="button" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" role="dialog" tabindex="-1" id="required">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <!-- <div class="modal-header">
</div> -->
                <div class="modal-body">
                    <p class="text-center">Please complete the required fields</p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default" type="button" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript">
        // on click validate/execute post function that retrieves best match
        $('#submitSurvey').on("click", function() {

            if ($('#name').val() === '' || $('#photo').val() === '') {
                $("#required").modal('toggle');
            } else {

                // create new object from user input
                var userData = {
                    name: $("#name").val(),
                    photo: $("#photo").val(),
                    scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val()]
                }

                // pull the origin of where user is right now
                var currentURL = window.location.origin;

                // AJAX post the data to the friends API.
                $.post(currentURL + "/api/new-friends", userData, function(data) {

                    // Grab the result from the AJAX post so that the best match's name and photo are displayed.
                    $("#modalHeader").text("Your new bestie is " + data.name + "!");
                    $('#modalImg').attr("src", data.photo);

                    // Show the modal with the best match
                    $("#resultsModal").modal('toggle');

                    // reset survey values
                    $("#name").val("");
                    $("#photo").val("");
                    $('#q1').prop('selectedIndex', 0);
                    $('#q2').prop('selectedIndex', 0);
                    $('#q3').prop('selectedIndex', 0);
                    $('#q4').prop('selectedIndex', 0);
                    $('#q5').prop('selectedIndex', 0);
                    $('#q6').prop('selectedIndex', 0);
                    $('#q7').prop('selectedIndex', 0);
                    $('#q8').prop('selectedIndex', 0);
                    $('#q9').prop('selectedIndex', 0);
                    $('#q10').prop('selectedIndex', 0);
                });
            }
        });
    </script>
</body>

</html>
